# AI Decision Intelligence: Retail Price Optimizer

## Project Overview
**ai_decision_intelligence** is an end-to-end Machine Learning pipeline designed to optimize retail pricing strategies. By analyzing historical transaction data, the system predicts future demand elasticity and simulates various pricing scenarios to identify the optimal price point that maximizes revenue.

The system uses **XGBoost** for demand forecasting and performs a "What-If" simulation to generate revenue curves for specific SKUs.

## Key Features
* **Data Aggregation:** Converts raw transactional data into daily time-series datasets.
* **Feature Engineering:** Generates Lag features (1-day, 7-day), Rolling means, and temporal features (Seasonality/Weekend flags).
* **Demand Forecasting:** Utilizes an **XGBoost Regressor** to predict daily sales quantity based on price and competitor moves.
* **Price Optimization Engine:** Simulates market response to price changes (-20% to +50%) to find the revenue-maximizing price point.
* **Visualization:** Plots theoretical revenue curves to visualize price elasticity.

## Project Structure
To ensure the scripts run correctly (as they use relative paths `../data`), structure your project folder as follows.

```text
ai_decision_intelligence/
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ online_retail.csv            # Source Data (Input)
â”‚   â”œâ”€â”€ retail_daily_aggregated.csv  # Generated by Step 1
â”‚   â””â”€â”€ demand_model_v2.pkl          # Generated by Step 2
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ 01_data_prep.py              # Data cleaning & transformation
â”‚   â”œâ”€â”€ 02_train_model.py            # XGBoost training pipeline
â”‚   â”œâ”€â”€ 03_optimize_price.py         # Inference & Optimization logic
â”‚   â””â”€â”€ 04_visualize_curve.py        # Synthetic visualization of revenue curves
â”‚
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

## ğŸ› ï¸ Installation & Requirements

1. **Clone the repository** (or create the folder structure above).
2. **Install dependencies**:
   ```bash
   pip install pandas numpy xgboost scikit-learn matplotlib joblib openpyxl
   ```
3. **Data Source**:
   * Download the [UCI Online Retail Dataset](https://archive.ics.uci.edu/ml/datasets/online+retail) (or your specific retail CSV).
   * Rename it to `online_retail.csv` and place it in the `data/` folder.

## Usage Pipeline

Run the scripts in the following order to execute the full pipeline.

### Step 1: Data Preparation
Cleans the raw transactional data, aggregates it to a daily level, selects top performing products, and creates a simulated "Competitor Price" column.
```bash
python src/01_data_prep.py
```
* **Output:** `data/retail_daily_aggregated.csv`

### Step 2: Model Training
Feeds the aggregated data into an XGBoost Regressor. It handles:
* Lag generation (creating time-series features).
* Log-transformation of the target variable (`Quantity`) to handle skewness.
* One-hot encoding for SKU IDs.
```bash
python src/02_train_model.py
```
* **Output:** `data/demand_model_v2.pkl` (Saved Model Artifact)

### Step 3: Price Optimization (Inference)
Loads the trained model and picks a specific product and date. It iterates through a price range (e.g., $10 to $15) and predicts the demand for each price, calculating the projected revenue.
```bash
python src/03_optimize_price.py
```
* **Output:** Prints the optimal price, predicted sales volume, and expected revenue lift compared to the actual historical price.

### Step 4: Visualization
Generates a synthetic revenue curve to visually demonstrate how price elasticity works (Revenue = Price Ã— Quantity).
```bash
python src/04_visualize_curve.py
```
* **Output:** A Matplotlib graph showing the "Optimization Curve" with the peak revenue point highlighted.

## Methodology

### The Objective Function
The goal is to maximize Revenue ($R$) for a given Product ($i$) at time ($t$):

$$R_{i,t} = P_{i,t} \times \hat{Q}(P_{i,t}, X_t)$$

Where:
* $P$ is the Price set by the retailer.
* $\hat{Q}$ is the predicted Quantity sold (estimated by the XGBoost model).
* $X_t$ represents external context (Seasonality, Competitor Price, Past Sales).

### Model Performance
The current model evaluates performance using **MAE** (Mean Absolute Error) and **$R^2$ Score**.
* *Lag Features* allows the model to "remember" sales from yesterday and last week.
* *Competitor Price* allows the model to understand relative value in the market.

---

### Next Steps for Development
* Implement a dashboard (Streamlit) to make the optimizer interactive.
* Replace synthetic Competitor Price with real scraped data.
* Add "Inventory Constraints" to the optimization logic (don't recommend a price that sells more stock than available).
